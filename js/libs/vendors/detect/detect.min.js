(()=>{{let s=i=>{typeof i[0]=="string"&&(i[0]=`[detect] ${i[0]}`)},e=console.log;console.log=(...i)=>{s(i),e(...i)},console.debug=(...i)=>{window.DEBUG&&(s(i),e(...i))};let t=console.warn;console.warn=(...i)=>{s(i),t(...i)};let n=console.error;console.error=(...i)=>{s(i),n(...i)}}function C(s){return s.toString(16)}function P(s,e,t,n){return C(s)+C(e)+C(t)+C(n)}var p=class s{constructor({r:e,g:t,b:n,a:i=1,name:o=""}){this.name=o,this.r=e,this.g=t,this.b=n,this.a=i}toHex(){return P(this.r,this.g,this.b,this.a)}static fromRGBA(e){let t=e.replace("rgba(","").replace(")","").split(",").map(n=>parseInt(n.trim()));return new s({r:t[0],g:t[1],b:t[2],a:t[3]})}toRGBA(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}withAlpha(e){return new s({...this,a:e})}static random(e=!1){let t=Math.round(Math.random()*255),n=Math.round(Math.random()*255),i=Math.round(Math.random()*255),o=e?Math.random():1;return new s({name:`rand-${t}-${n}-${i}-${o}`,r:t,g:n,b:i,a:o})}static fromHex(e){let t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16),o=parseInt(e.substring(6,8),16);return new s({name:`hex-${t}-${n}-${i}-${o}`,r:t,g:n,b:i,a:o})}};function $(s,e){let t=Math.max(0,Math.min(s.x+s.width,e.x+e.width)-Math.max(s.x,e.x)),n=Math.max(0,Math.min(s.y+s.height,e.y+e.height)-Math.max(s.y,e.y)),i=t*n,o=e.width*e.height;return i/o*100}function G(s,e){let t=s.getBoundingClientRect();return{left:t.left+e.document.scrollingElement.scrollLeft,top:t.top+e.document.scrollingElement.scrollTop}}var x=class s{constructor(e,t,n,i,o){this.id=crypto.randomUUID(),this.x=Math.round(e),this.y=Math.round(t),this.width=Math.round(n),this.height=Math.round(i),this.div=o,this.children=[],this.selector=[],this.equivalentSelectorChildren=[],this.prediction=null,this.layout=null}static fromDiv(e,t){let n=e.getBoundingClientRect(),i=G(e,t);return new s(i.left,i.top,n.width,n.height,e)}static areBoxesLaidOutAsGrid(e){if(e.length<2)return!1;let t=e.slice().sort((a,h)=>a.x-h.x||a.y-h.y),n=e.slice().sort((a,h)=>a.y-h.y||a.x-h.x),i=[];for(let a=1;a<t.length;a++)i.push(t[a].x-t[a-1].x);if([...new Set(i)].length>1)return!1;let r=[];for(let a=1;a<n.length;a++)r.push(n[a].y-n[a-1].y);return[...new Set(r)].length<=1}contains(e,t=!0){return t?e.x-e.width>=this.x-this.width&&e.x+e.width<=this.x+this.width&&e.y-e.height>=this.y-this.height&&e.y+e.height<=this.y+this.height:$(this,e)>75}intersects(e){return!(e.x-e.width>this.x+this.width||e.x+e.width<this.x-this.width||e.y-e.height>this.y+this.height||e.y+e.height<this.y-this.height)}isInside(e){return e.x-e.width<=this.x-this.width&&e.x+e.width>=this.x+this.width&&e.y-e.height<=this.y-this.height&&e.y+e.height>=this.y+this.height}addChild(e){this.children.push(e)}setBoxSelectors(e){if(this.selector=[],this.equivalentSelectorChildren=[],this.xpath){let t=document.evaluate(this.xpath,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(!t){let n=document.querySelector("#import-content-frame");n&&n.contentDocument&&(t=n.contentDocument.evaluate(this.xpath,n.contentDocument,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue)}for(;t&&t.nodeName.toLowerCase()!=="body";)this.selector.unshift(this.getSelector(t)),t=t.parentElement;this.selector.length>0&&this.selector.unshift("body")}if(e){let t=this?.div;for(;t?.children.length===1;)this.equivalentSelectorChildren.push(this.getSelector(t)),t=t.children[0];this.improveSelectors()}}getSelector(e){let t=e.getAttribute("id"),n=e?.className.trim().replaceAll(" ","."),i="";return t&&t.length>0?i=`#${t}`:n&&n.length>0&&(i+=`.${n}`),i.length>0?i:e?`> ${e.nodeName}`:""}improveSelectors(){if(this.equivalentSelectorChildren.length>1){let e=this.equivalentSelectorChildren.findIndex(t=>t.startsWith("#"));if(e>=0){this.selector.pop();let t=this.equivalentSelectorChildren.splice(e,1)[0];this.selector.push(t)}}}determineLayout(){return this.layout={numCols:j(this.children),numRows:z(this.children)},this.layout}};function j(s){if(!s.length)return 0;s.sort((t,n)=>t.x-n.x);let e=[];return s.forEach(t=>{let n=t.x,i=t.x+t.width,o=e[e.length-1];o?n>=o&&e.push(i):e.push(i)}),e.length}function z(s){if(!s.length)return 0;s.sort((t,n)=>t.y-n.y);let e=[];return s.forEach(t=>{let n=t.y,i=t.y+t.height,o=e[e.length-1];o?n>=o-5&&e.push(i):e.push(i)}),e.length}var g=class s{static getXPath(e,t,n=!1){for(var i=t.getElementsByTagName("*"),o=[];e&&e.nodeType===1;e=e.parentNode)if(n)if(e.hasAttribute("id")){for(var r=0,l=0;l<i.length&&(i[l].hasAttribute("id")&&i[l].id===e.id&&r++,!(r>1));l++);if(r===1)return o.unshift('id("'+e.getAttribute("id")+'")'),o.join("/");o.unshift(e.localName.toLowerCase()+'[@id="'+e.getAttribute("id")+'"]')}else e.hasAttribute("class")&&o.unshift(e.localName.toLowerCase()+'[@class="'+[...e.classList].join(" ").trim()+'"]');else{for(var a=1,h=e.previousSibling;h;h=h.previousSibling)h.localName===e.localName&&(a+=1);o.unshift(e.localName.toLowerCase()+"["+a+"]")}return o.length?"/"+o.join("/"):null}static isVisible(e,t){if(!e)return!1;if(e.nodeType===t.Node.DOCUMENT_NODE)return!0;if(e.nodeType===t.Node.ELEMENT_NODE){let n=t.getComputedStyle(e);return n.display.includes("none")||n.visibility.includes("hidden")||n.opacity==="0"?!1:s.isVisible(e.parentNode,t)}}static isUserVisible(e,t){if(!s.isVisible(e,t))return!1;let n=e.getBoundingClientRect();return!(n.height===0||n.width===0)}static getNSiblingsDivs(e,t=null){let n=t;isNaN(t)||(n=r=>r===t);let i="",o=[];e.querySelectorAll("div").forEach(r=>{let l=s.getXPath(r,document),a=l.substring(0,l.lastIndexOf("["));o[a]?o[a].push(r):o[a]=[r]});for(let r in o)if(n(o[r].length)){i=r;break}return o[i]||null}static getPageSize(e){var t=e.documentElement,n=e.body,i=Math.max(t.clientWidth,t.scrollWidth,t.offsetWidth,n.scrollWidth,n.offsetWidth),o=Math.max(t.clientHeight,t.scrollHeight,t.offsetHeight,n.scrollHeight,n.offsetHeight);return{width:i,height:o}}static getOffsetRect(e,t){let n=e.getBoundingClientRect(),i=t.document?.scrollingElement?.scrollLeft||0,o=t.document?.scrollingElement?.scrollTop||0;return{x:n.left+i,y:n.top+o,width:n.width,height:n.height}}static checkElStackUpCSSClasses(e,t){let n=e;for(;n;){if(n.classList.contains(t))return!0;n=n.parentElement}return!1}static getAllVisibleElements=(e=document.body,t)=>{let n=[...e.querySelectorAll("*")].filter(r=>!["IFRAME","NOSCRIPT","BR","EM","STRONG","STYLE","SCRIPT"].includes(r.nodeName)).reduce((r,l)=>{var a=l.closest("svg");return!(a!==null&&a!==l)&&!r.includes(l.nodeName)&&r.push(l.nodeName),r},[]);return[...e.querySelectorAll(n.join(","))].filter(r=>s.isUserVisible(r,t))}};var w=class{constructor(...e){e.reduce((t,n,i)=>(t[n]=1<<i,t),this)}},E=class{#e=0;constructor(...e){this.#e=0,this.setFlags(...e)}get flag(){return this.#e}setFlags(...e){this.#e=e.reduce((t,n)=>t|n,0)}setFlag(e){this.#e|=e}unsetFlag(e){this.#e&=~e}isFlagSet(e){return(this.#e&e)!==0}areOnlyFlagsSet(...e){let t=e.reduce((n,i)=>n|i,0);return this.#e===t}getFlags(e){return Object.keys(e).filter(t=>this.isFlagSet(e[t]))}};function S(s){var e=0,t=s.length,n=0;if(t>0)for(;n<t;)e=(e<<5)-e+s.charCodeAt(n++)|0;return e}function B(s){return s?s.replaceAll(`
`," ").replaceAll("	"," ").replaceAll(/\s+/g," ").trim():""}function I(s,...e){return(...t)=>{let n=t[t.length-1]||{},i=[s[0]];return e.forEach((o,r)=>{let l=Number.isInteger(o)?t[o]:n[o];i.push(l,s[r+1])}),i.join("")}}async function V(s){return new Promise(e=>{let t=0,n=500,i=setInterval(()=>{let{scrollHeight:o}=s.document.scrollingElement;t+=n,s.document.scrollingElement.scrollTo({top:t,left:0,behavior:"instant"}),t>=o&&(clearInterval(i),e(!0))},100)})}async function N(s,e={postReset:!0}){try{await V(s),await setTimeout(()=>{},250),e.postReset&&(s.document.scrollingElement.scrollTo({left:0,top:0,behavior:"instant"}),await setTimeout(()=>{},250))}catch(t){throw new Error(`smart scroll failed: ${t}`)}}function R(s,e){let t=null,n=null;return t=[...s.querySelectorAll("*")].some(i=>{let o=e.getComputedStyle(i),r=i.getBoundingClientRect(),l=o.backgroundImage||"none",a="none";if(a&&a.includes("rgba")&&Color.fromRGBA(a).a===0&&(a="none"),l.includes("none")&&a.includes("none"))return!1;if(l||a)return n=i,!0}),t||(t=[...s.querySelectorAll("img")].some(i=>g.isUserVisible(i,e)),t)?n:t}var c=window.xp??{},F=class{constructor({sectionType:e,sectionFeatures:t,template:n,confidence:i}){this.sectionType=e,this.sectionFeatures=t,this.template=n,this.confidence=i}},U=[{name:"header",predictFn:(s,e,t,n)=>!!(n.isFlagSet(d.isFromRootBox)&&e===0)},{name:"footer",predictFn:(s,e,t,n)=>!!(n.isFlagSet(d.isFromRootBox)&&e===t.length-1)},{name:"carousel",predictFn:s=>{let e=g.getNSiblingsDivs(s.div,t=>t>=2);if(e){let t={};e.forEach(i=>{let o=g.getXPath(i,document),r=[...i.querySelectorAll("div")].map(a=>g.getXPath(a,document).slice(o.length)),l=S(r.join(`
`));t[l]?t[l].push(i):t[l]=[i]});let n=Object.keys(t).filter(i=>t[i].length>1);if(t[n]){let i=!1,o=!1;if(t[n].forEach(r=>{g.isVisible(r,window)?i=!0:o=!0}),i&&o)return!0}return!1}return!1}},{name:"columns",predictFn:(s,e,t,n)=>n.isFlagSet(d.isGridLayout)},{name:"hero",predictFn:(s,e,t,n)=>s.height<=window.innerHeight&&n.isFlagSet(d.hasBackground)&&n.isFlagSet(d.hasHeading)&&n.isFlagSet(d.hasCallToAction)},{name:"heading",predictFn:(s,e,t,n)=>{if(!n.isFlagSet(d.hasHeading))return!1;let i=s.div.cloneNode(!0);i.querySelectorAll("script, style, link, meta, noscript").forEach(l=>l.remove());let o=B(i.querySelector("h1, h2, h3, h4, h5, h6")?.textContent),r=B(i.textContent);return n.isFlagSet(d.hasTexts)&&o===r&&n.isFlagSet(d.hasHeading)&&!n.isFlagSet(d.hasImages)&&!n.isFlagSet(d.hasCallToAction)&&!n.isFlagSet(d.hasBackground)}},{name:"text",predictFn:(s,e,t,n)=>n.isFlagSet(d.hasTexts)&&!n.isFlagSet(d.hasImages)&&!n.isFlagSet(d.hasBackground)},{name:"text+icons",predictFn:(s,e,t,n)=>{let i=!0;[...s.div.querySelectorAll("img")].some(l=>{let a=l.getBoundingClientRect();return a.width>50&&a.height>50})&&(i=!1);let r=!s.children.some(l=>!["heading","text","text+icons"].includes(l.prediction?.sectionType));return!n.isFlagSet(d.isGridLayout)&&r&&n.isFlagSet(d.hasTexts)&&i&&!n.isFlagSet(d.hasBackground)}}];c.DOM=g;c.Flags=w;c.FlagSet=E;var X=[new p({name:"violet",r:148,g:0,b:211}),new p({name:"indigo",r:75,g:0,b:130}),new p({name:"blue",r:0,g:0,b:255}),new p({name:"green",r:0,g:255,b:0}),new p({name:"yellow",r:255,g:255,b:0}),new p({name:"orange",r:255,g:127,b:0}),new p({name:"red",r:255,g:0,b:0})];c.filterDivs=s=>s.filter(n=>{let i=n.getBoundingClientRect(),{width:o,height:r}=g.getPageSize();return!n.classList.contains("xp-ui")&&!n.closest(".xp-ui")&&i.width!==0&&i.height!==0&&i.width*i.height>1e4&&i.width*i.height<.8*o*r&&g.isVisible(n,window)}).filter(n=>{let i=n.parentElement;for(;i;){let o=n.getBoundingClientRect(),r=i.getBoundingClientRect();if(r.width===0||r.height===0){i=i.parentElement;continue}if(o.width>=.9*r.width&&o.height>=.9*r.height)return!1;i=i.parentElement}return!0});var _=I`position:absolute;z-index:999998;left:${0}px;top:${1}px;width:${2}px;height:${3}px;border:2px solid ${4};`,Y=I`position:absolute;z-index:999999;left:auto;right:0;font-size:8px;display:none`,H=(s,{target:e=document.body,padding:t=0,color:n=null,label:i=null})=>{let o=n||"rgba(0, 0, 255, 1)",r=g.getOffsetRect(s.div,window),l=s.selector?s.selector.join(" "):void 0,a=s.equivalentSelectorChildren?s.equivalentSelectorChildren.join(","):void 0,h=document.createElement("div");h.dataset.boxId=s.id,h.dataset.boxXpath=s.xpath,h.dataset.selector=l,h.dataset.equivalentSelectorChildren=a,h.dataset.boxData=JSON.stringify((({id:u,x:T,y,width:v,height:q,xpath:L,layout:D,selector:O,equivalentSelectorChildren:M})=>({id:u,x:T,y,width:v,height:q,xpath:L,layout:D,selector:O?s.selector.join(" "):void 0,equivalentSelectorChildren:M}))(s)),h.className="xp-overlay",h.style=_(r.x+t,r.y+t,r.width-t*2-4,r.height-t*2-4,o);function f(u,T){let y=u.querySelector(".xp-overlay-selector");y&&(T?y.classList.add("show"):y.classList.remove("show"))}if(h.addEventListener("mouseenter",u=>{f(u.target,!0)}),h.addEventListener("mouseleave",u=>{f(u.target)}),i){let u=document.createElement("div");u.className="xp-overlay-label",u.textContent=i,h.appendChild(u)}let m=document.createElement("div");m.classList.add("xp-overlay-label","xp-overlay-selector"),m.style=Y();let b=`${s.selector.join("<br />")}`;if(s.equivalentSelectorChildren.length>1){let u=s.equivalentSelectorChildren.slice(1).join("<br />");b=`${b}<br />&nbsp;&nbsp;&nbsp;&nbsp;---- Alternative Selectors for final element ----<br />${u}`}m.innerHTML=b,h.appendChild(m),e.appendChild(h)};function A(s,e,t=0,n=X,i=null,o=0){s.children.forEach((r,l)=>{let a=i||n[l%(n.length-1)],h=o===0?1:Math.max(.1,.5-o*.1),f=a.withAlpha(h).toRGBA();r.color=f,H(r,{target:e.document.body,padding:t,color:f}),r.children.length>0&&A(r,e,t+2,n,a,o+1)})}var d=new w("isFromRootBox","hasHeader","hasTexts","hasBackground","hasHeading","hasCallToAction","hasImages","hasMultipleColumns","hasMultipleRows","isGridLayout");function k(s,e,t,n=!0){if(s.ignored)return null;let i="unknown",o=new E,r=s.div;n&&o.setFlag(d.isFromRootBox);let l=r.cloneNode(!0);l.querySelectorAll("script, style, link, meta, noscript").forEach(v=>v.remove()),l.textContent.replaceAll(" ","").replaceAll(`
`,"").trim().length>0&&o.setFlag(d.hasTexts),([...r.querySelectorAll("img, picture, svg")].length>0||["IMG","PICTURE","SVG"].includes(r.nodeName))&&o.setFlag(d.hasImages),!!R(s.div,window)&&o.setFlag(d.hasBackground),([...r.querySelectorAll("h1, h2, h3, h4, h5, h6")].length>0||["H1","H2","H3","H4","H5","H6"].includes(r.nodeName))&&o.setFlag(d.hasHeading),[...r.querySelectorAll("a, button")].length>0&&o.setFlag(d.hasCallToAction);let u=s.determineLayout();u.numRows>1&&o.setFlag(d.hasMultipleRows),u.numCols>1&&o.setFlag(d.hasMultipleColumns),u.numCols>1&&x.areBoxesLaidOutAsGrid(s.children)&&o.setFlag(d.isGridLayout),s.children.forEach((...v)=>{k(...v,!1)});let y=U.find(v=>v.predictFn(s,e,t,o));return y?s.prediction=new F({sectionType:y.name,sectionFeatures:o,confidence:-1}):s.prediction=new F({sectionType:"unknown",sectionFeatures:o,confidence:-1}),i}function W(){let s=[...document.body.querySelectorAll("*")].filter(n=>!["IFRAME","NOSCRIPT","BR","EM","STRONG","STYLE","SCRIPT"].includes(n.nodeName)).reduce((n,i)=>{var o=i.closest("svg");return!(o!==null&&o!==i)&&!n.includes(i.nodeName)&&n.push(i.nodeName),n},[]),e=[...document.querySelectorAll(s.join(","))];return c.filterDivs(e)}c.getAllVisibleDivs=W;c.buildBoxTree=(s,e)=>{let t=new x(0,0,e.innerWidth,e.document.scrollingElement.scrollHeight),n=s.map(l=>x.fromDiv(l,e));function i(l,a,h){a.forEach((f,m)=>{if(h.has(m))return;if(l.contains(f,!1)){let u=f;l.addChild(u),h.add(m),i(u,a,h)}})}i(t,n,new Set);function o(l){l.determineLayout(),l.children.forEach(o)}o(t);function r(l){if(l.children.length===1&&l.layout.numCols===1){let a=l.children[0];l.children=a.children,r(l)}else l.children.forEach(r)}return r(t),o(t),t};c.getVerticalBoxesFromHierarchy=s=>{let e={...s};function t(n){let i=n.children;if(i.some(r=>i.some(l=>r!==l&&!r.isInside(l)&&(r.x>=l.x+l.width||r.x+r.width<=l.x))))n.setChildren([]);else for(let r=0;r<i.length;r++)t(i[r])}return t(e),e.children};c.boxes=null;c.highlightVerticalBoxes=()=>{let s=c.getAllVisibleDivs(),e=c.buildBoxTree(s),t=c.getVerticalBoxesFromHierarchy(e,!1),n=new x(0,0,window.innerWidth,window.document.scrollingElement.scrollHeight);n.setChildren(t),A(n)};c.analysePage=async()=>{c.ui?.resetOverlays();let s=g.getAllVisibleElements();c.boxes=c.buildBoxTree(s),A(c.boxes),c.ui?.toggleOverlays(!0);let e=c.boxes.children.map(t=>g.getXPath(t.div,document)).join(`
`)||"";return c.boxes.template={raw:e,hash:S(e)},c.boxes.children.forEach((t,n,i)=>{k(t,n,i)}),c.boxes};c.predictPage=()=>{if(c.boxes?.children?.length>0){let s=function(t){t.ignored||(t.prediction&&t.prediction.sectionType!=="unknown"||t.prediction&&t.prediction.sectionType==="unknown"&&t.children.length===0?c.ui&&H(t,{padding:0,color:"rgba(0, 255, 0, 1)",label:t.prediction.sectionType}):t.children.forEach(s))};c.ui?.resetOverlays(),c.boxes.children.forEach((t,n,i)=>{k(t,n,i)}),s(c.boxes);let e=c.boxes.children.map(t=>{let n=[g.getXPath(t.div,document)];return n.push(...t.children.map(i=>"- "+g.getXPath(i.div,document))),n.join(`
`)||""}).join(`
`)||"";return c.boxes.template={raw:e,hash:S(e)},c.ui?.toggleOverlays(!0),c.boxes}};c.selectElementToIgnore=()=>{document.body.style.cursor="crosshair",c.ui.overlaysDiv().addEventListener("click",e=>{let t=e.target;t.classList.contains("xp-overlay")&&t.remove(),c.ignoreElementForDection(t.dataset.boxId),document.body.style.removeProperty("cursor")},{once:!0})};c.ignoreElementForDection=s=>{function e(t){if(t.id===s){let n=function(i){[...c.ui.overlaysDiv().querySelectorAll(".xp-overlay")].forEach(r=>{r.dataset.boxId===i.id&&r.remove()}),i.children.forEach(n)};return t.ignored=!0,n(t),!0}else return t.children.some(e)}e(c.boxes)};c.detectSections=async(s,e)=>{c.ui?.resetOverlays(),await N(e);let{document:t}=e,n=g.getAllVisibleElements(s,e);n=n.filter(l=>{let a=l.getBoundingClientRect();return a.width*a.height>3e4});let i=c.buildBoxTree(n,e);function o(l,a){l.div&&(l.xpath=g.getXPath(l.div,a),l.id=`box-id-${S(l.xpath)}`,l.setBoxSelectors(!0)),l.children&&l.children.length>0&&l.children.forEach(h=>o(h,a))}o(i,t),A(i,e);let r=i.children.map(l=>{let a=[l.xpath];return a.push(...l.children.map(h=>"- "+h.xpath)),a.join(`
`)||""}).join(`
`)||"";return c.boxes=i,c.template={raw:r,hash:S(r)},c.ui?.toggleOverlays(!0),i};window.xp=c;})();
